OrderedDict([('total_recs', 30),
('recomm_for', 15),
 ('existing', 10),
  ('red_flags', 0),
  ('pre_approved_matched_count', 15),
  ('applier_success_count', 20),
  ('applier_failed_count', 3)])

  OrderedDict([('headers', {'correlation_id': 'pm_not_avl', 'username': 'kannan', 'ticket_num': 'srno123', 'type': 'change_record'}), ('payload', OrderedDict([('summary', OrderedDict([('total_recs', 30), ('recomm_for', 15), ('existing', 10), ('red_flags', 0), ('pre_approved_matched_count', 15), ('pre_approved_not_matched_count', 0), ('approved_matched_count', 15)])), ('gen_summary', {'details': [{'source': '10.10.10.1', 'destination': '10.172.2.1', 'protocol': 'tcp', 'port': 22, 'input-row-id': 1}, {'source': '10.10.10.3', 'destination': '10.172.2.3', 'protocol': 'tcp', 'port': 22, 'input-row-id': 2}, {'source': '10.10.10.1', 'destination': '10.172.2.1', 'protocol': 'tcp', 'port': 22, 'input-row-id': 1}], 'summary': {'red_flags': 5, 'recomm_for': 15, 'total_recs': 30, 'existing': 10}}), ('pre_approved_matched', '{"New_Policies": {"ch3-fa-c4r512-fw-1": {"meta-data": {"model": "SRX", "vendor": "Cisco"}, "cmds": {"new_app_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh"], "new_src_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32"], "new_dst_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17"]}}, "ch3-fa-c4r512-fw-2": {"meta-data": {"model": "SRX", "vendor": "Cisco"}, "cmds": {"new_app_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh"], "new_src_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32"], "new_dst_cmd": ["set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17"]}}}}'), ('applier_result', '{"applier_result": {"ch3-fa-c4r512-fw-1": {"meta-data": {"model": "SRX", "vendor": "Cisco"}, "cmds": {"new_app_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh", "result": "Passed"}], "new_src_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"reason": "ssh error failed to connect", "cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "failed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"reason": "Policy cannot be applied Error", "cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "failed"}], "new_dst_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}]}}, "ch3-fa-c4r512-fw-3": {"meta-data": {"model": "SRX", "vendor": "Cisco"}, "cmds": {"new_app_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh", "result": "Passed"}], "new_src_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "failed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}], "new_dst_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}]}}, "ch3-fa-c4r512-fw-2": {"meta-data": {"model": "SRX", "vendor": "Cisco"}, "cmds": {"new_app_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh", "result": "Passed"}], "new_src_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "failed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32", "result": "Passed"}], "new_dst_cmd": [{"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}, {"cmd": "set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17", "result": "Passed"}]}}}}'), ('new_policy', {'New_Policies': {'ch3-fa-c4r512-fw-1': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}, 'ch3-fa-c4r512-fw-3': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}, 'ch3-fa-c4r512-fw-2': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}}}), ('existing_policies', {'New_Policies': {'ch3-fa-c4r512-fw-1': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}, 'ch3-fa-c4r512-fw-3': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}, 'ch3-fa-c4r512-fw-2': {'meta-data': {'model': 'SRX', 'vendor': 'Cisco'}, 'cmds': {'new_app_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match application junos-ssh'], 'new_src_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match source-address us2-chicago-colo-opc-v142-10.72.21.65/32'], 'new_dst_cmd': ['set security policies from-zone PRIVATE-MT to-zone UNTRUST policy 180814-001010_psane_1 match destination-address b2b22.bankofamerica.com-171.162.110.17']}}}})]))])

ls['payload'].keys()
['summary', 'gen_summary', 'pre_approved_matched', 'applier_result', 'new_policy', 'red_flags','existing_policies']

create table change_details
(
  id integer primary key  autoincrement,
  insert_date    DATE          not null,
  correlation_id varchar2(100) not null,
  username       varchar2(50)  not null,
  ticket_no      varchar2(50)  not null,
  type           varchar2(50)  not null,
  total_recs     int,
  recomm_for     int,
  existing       int,
  red_flags      int,
  pre_approved_matched_count int,
  pre_approved_not_matched_count int,
  applier_success_count   int,
  applier_failed_count  int,
  payload        data          not null,
  status         varchar2(20)  not null
);






create table applier_temp
(
  id             integer
    primary key
  autoincrement,
  insert_date    DATE          not null,
  correlation_id varchar2(100) not null,
  username       varchar2(50)  not null,
  ticket_no      varchar2(50)  not null,
  type           varchar2(50)  not null,
  total_failed   int,
  total_success  int,
  payload        data          not null,
  status         varchar2(20)  not null
);

insert into applier_temp
SELECT id,insert_date,correlation_id,username,ticket_no,type,0,0,payload,status
FROM applier;

DROP table applier;
ALTER TABLE applier_temp RENAME TO applier;
